<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ÙˆÙ„Ø¯ Ø­Ù„Ù‚Ø§Øª Ø£Ù†Ù…ÙŠ ÙƒÙˆÙ†Ø§Ù† - Aoibu V2</title>
    <link href="https://fonts.googleapis.com/css2?family=El+Messiri:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'El Messiri', sans-serif;
            background: #0f1016;
            color: #fff;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            background: rgba(30, 32, 40, 0.8);
            padding: 30px;
            border-radius: 15px;
            border: 1px solid #00bcd4;
            width: 100%;
            max-width: 800px;
            box-shadow: 0 0 20px rgba(0, 188, 212, 0.2);
        }
        h2 { text-align: center; color: #00bcd4; margin-bottom: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; color: #ccc; }
        input, select {
            width: 100%;
            padding: 10px;
            background: #0a0b10;
            border: 1px solid #333;
            color: #fff;
            border-radius: 5px;
            font-family: sans-serif;
            box-sizing: border-box;
        }
        input:focus { outline: none; border-color: #00bcd4; }
        
        /* Ø²Ø± Ø§Ù„Ø±ÙØ¹ */
        .file-upload-wrapper {
            position: relative;
            border: 2px dashed #444;
            padding: 20px;
            text-align: center;
            border-radius: 10px;
            cursor: pointer;
            transition: 0.3s;
        }
        .file-upload-wrapper:hover { border-color: #00bcd4; background: rgba(0, 188, 212, 0.05); }
        .upload-status { font-size: 14px; margin-top: 10px; font-weight: bold; }
        
        button {
            width: 100%;
            padding: 15px;
            background: #00bcd4;
            color: #000;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: 0.3s;
        }
        button:hover { background: #008ba3; }
        button:disabled { background: #555; cursor: not-allowed; }

        textarea {
            width: 100%;
            height: 300px;
            background: #050505;
            color: #00ff9d;
            border: 1px solid #333;
            margin-top: 20px;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            direction: ltr;
        }
        .note { font-size: 12px; color: #777; margin-top: 5px; }
        .preview-img { max-width: 100px; max-height: 140px; margin-top: 10px; border-radius: 5px; display: none; border: 1px solid #fff; }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸ› ï¸ Ù…ÙˆÙ„Ø¯ Ø­Ù„Ù‚Ø§Øª Aoibu (Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù…Ø·ÙˆØ±)</h2>

    <div style="display: flex; gap: 10px;">
        <div class="form-group" style="flex: 1;">
            <label>Ø±Ù‚Ù… Ø§Ù„Ø­Ù„Ù‚Ø©:</label>
            <input type="text" id="epNum" placeholder="1192">
        </div>
        <div class="form-group" style="flex: 2;">
            <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø­Ù„Ù‚Ø© (Ø§Ø³Ù… Ø§Ù„Ù‚ØµØ©):</label>
            <input type="text" id="epTitle" placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„Ø­Ø¨ÙŠØ¨ Ø§Ù„Ø°ÙŠ Ø§Ø®ØªÙÙ‰...">
        </div>
    </div>

    <div class="form-group">
        <label>Ø§Ù„Ø¨ÙˆØ³ØªØ± (Ø§Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© ÙˆØ³ÙŠØªÙˆÙ„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ø³ØªØ¶Ø§ÙØªÙ‡Ø§):</label>
        <div class="file-upload-wrapper" onclick="document.getElementById('posterFile').click()">
            <span id="uploadText">ğŸ“‚ Ø§Ø¶ØºØ· Ù„Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø§Ù„Ø¨ÙˆØ³ØªØ±</span>
            <input type="file" id="posterFile" accept="image/*" style="display: none;" onchange="handleImageUpload(this)">
        </div>
        <img id="imgPreview" class="preview-img" src="">
        <div id="uploadStatus" class="upload-status" style="color: #ff9800;"></div>
        <input type="hidden" id="finalPosterUrl">
    </div>

    <div class="form-group">
        <label>Ø±Ø§Ø¨Ø· Google Drive:</label>
        <input type="text" id="driveLink" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ù„Ù Ø£Ùˆ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©">
    </div>

    <div class="form-group">
        <label>Ø±Ø§Ø¨Ø· Mega:</label>
        <input type="text" id="megaLink" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ù„Ù Ø£Ùˆ Embed">
    </div>

    <div class="form-group">
        <label>Ø±ÙˆØ§Ø¨Ø· Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):</label>
        <input type="text" id="rawLink" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ø®Ø§Ù…" style="margin-bottom: 5px;">
        <input type="text" id="subLink" placeholder="Ø±Ø§Ø¨Ø· Ù…Ù„Ù Ø§Ù„ØªØ±Ø¬Ù…Ø©">
    </div>

    <button id="generateBtn" onclick="generateHTML()">âš¡ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙƒÙˆØ¯</button>

    <textarea id="outputCode" placeholder="Ø³ÙŠØ¸Ù‡Ø± Ø§Ù„ÙƒÙˆØ¯ Ù‡Ù†Ø§..."></textarea>
    <button onclick="copyCode()" style="background: #333; color: #fff; margin-top: 10px;">ğŸ“‹ Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯</button>
</div>

<script>
    // Ù…ÙØªØ§Ø­ API Ù…Ø¬Ø§Ù†ÙŠ Ù…Ù† ImgBB (ÙŠÙ…ÙƒÙ†Ùƒ ØªØºÙŠÙŠØ±Ù‡ Ø¨Ù…ÙØªØ§Ø­Ùƒ Ø§Ù„Ø®Ø§Øµ Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª)
    // Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù…ÙØªØ§Ø­Ùƒ Ù…Ø¬Ø§Ù†Ø§ Ù…Ù†: https://api.imgbb.com/
    const IMGBB_API_KEY = "1a3381c886abff3277bc11ab4fbefedf"; 

    function handleImageUpload(input) {
        if (input.files && input.files[0]) {
            const file = input.files[0];
            const statusDiv = document.getElementById('uploadStatus');
            const preview = document.getElementById('imgPreview');
            const genBtn = document.getElementById('generateBtn');

            // Ù…Ø¹Ø§ÙŠÙ†Ø©
            const reader = new FileReader();
            reader.onload = function(e) {
                preview.src = e.target.result;
                preview.style.display = 'block';
            }
            reader.readAsDataURL(file);

            // Ø¨Ø¯Ø¡ Ø§Ù„Ø±ÙØ¹
            statusDiv.innerText = "Ø¬Ø§Ø±ÙŠ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ù„Ù„Ø³ÙŠØ±ÙØ± ÙˆØªÙˆÙ„ÙŠØ¯ Ø±Ø§Ø¨Ø· Ø¯Ø§Ø¦Ù…... â³";
            statusDiv.style.color = "#ff9800";
            genBtn.disabled = true; // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„ØªÙˆÙ„ÙŠØ¯ Ø­ØªÙ‰ ÙŠÙ†ØªÙ‡ÙŠ Ø§Ù„Ø±ÙØ¹

            const formData = new FormData();
            formData.append("image", file);

            fetch(`https://api.imgbb.com/1/upload?key=${IMGBB_API_KEY}`, {
                method: "POST",
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    document.getElementById('finalPosterUrl').value = data.data.url;
                    statusDiv.innerText = "âœ… ØªÙ… Ø§Ù„Ø±ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­! Ø§Ù„Ø±Ø§Ø¨Ø· Ø¬Ø§Ù‡Ø².";
                    statusDiv.style.color = "#00ff9d";
                    document.getElementById('uploadText').innerText = "ØªÙ… Ø§Ø®ØªÙŠØ§Ø±: " + file.name;
                } else {
                    throw new Error("ÙØ´Ù„ Ø§Ù„Ø±ÙØ¹");
                }
            })
            .catch(error => {
                console.error(error);
                statusDiv.innerText = "âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø±ÙØ¹. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª Ø£Ùˆ Ø¬Ø±Ø¨ ØµÙˆØ±Ø© Ø£ØµØºØ±.";
                statusDiv.style.color = "red";
            })
            .finally(() => {
                genBtn.disabled = false;
            });
        }
    }

    function generateHTML() {
        // 1. Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        let ep = document.getElementById('epNum').value.trim();
        let title = document.getElementById('epTitle').value.trim();
        let poster = document.getElementById('finalPosterUrl').value.trim(); // Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ„Ø¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        
        let driveInput = document.getElementById('driveLink').value.trim();
        let megaInput = document.getElementById('megaLink').value.trim();
        let rawLink = document.getElementById('rawLink').value.trim();
        let subLink = document.getElementById('subLink').value.trim();

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¨ÙˆØ³ØªØ±
        if (!poster) {
            alert("âš ï¸ Ø§Ù„Ù…Ø±Ø¬Ùˆ Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ø¨ÙˆØ³ØªØ± Ø£ÙˆÙ„Ø§Ù‹ Ø£Ùˆ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø­ØªÙ‰ ÙŠÙƒØªÙ…Ù„ Ø§Ù„Ø±ÙØ¹.");
            return;
        }

        // 2. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø±Ø§Ø¨Ø· Drive
        let driveEmbed = "";
        let driveDL = "";
        let driveIdMatch = driveInput.match(/\/d\/([a-zA-Z0-9_-]+)/);
        if (driveIdMatch && driveIdMatch[1]) {
            let id = driveIdMatch[1];
            driveEmbed = `https://drive.google.com/file/d/${id}/preview`;
            driveDL = `https://drive.google.com/file/d/${id}/view?usp=drivesdk`;
        } else {
            driveEmbed = driveInput;
            driveDL = driveInput;
        }

        // 3. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø±Ø§Ø¨Ø· Mega
        let megaEmbed = "";
        let megaDL = "";
        if (megaInput.includes("mega.nz/file/")) {
            megaDL = megaInput;
            megaEmbed = megaInput.replace("/file/", "/embed/");
        } else if (megaInput.includes("mega.nz/embed/")) {
            megaEmbed = megaInput;
            megaDL = megaInput.replace("/embed/", "/file/");
        } else {
            megaEmbed = megaInput;
            megaDL = megaInput;
        }

        // 4. Ø§Ù„Ù‚Ø§Ù„Ø¨ (Ù…Ø¹ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ù„Ø§Ø³Ù… Ø§Ù„Ø­Ù„Ù‚Ø© ÙˆØ§Ù„Ø¨ÙˆØ³ØªØ±)
        let template = `<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />

    <link rel="icon" type="image/webp" href="Aoibu_Logo192.webp">
    <link rel="shortcut icon" type="image/webp" href="Aoibu_Logo192.webp">
    <link rel="apple-touch-icon" href="Aoibu_Logo192.webp">

    <title>Ø§Ù†Ù…ÙŠ Ø§Ù„Ù…Ø­Ù‚Ù‚ ÙƒÙˆÙ†Ø§Ù† Detective Conan Ø§Ù„Ø­Ù„Ù‚Ø© ${ep} Ù…ØªØ±Ø¬Ù…Ø©</title>
    <link href="https://fonts.googleapis.com/css2?family=El+Messiri:wght@400;600;700&display=swap" rel="stylesheet">
  
    <meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=edge,chrome=1" />
    <meta name="title" content="Ø§Ù†Ù…ÙŠ Ø§Ù„Ù…Ø­Ù‚Ù‚ ÙƒÙˆÙ†Ø§Ù† Detective Conan Ø§Ù„Ø­Ù„Ù‚Ø© ${ep} Ù…ØªØ±Ø¬Ù…Ø©" />
    <meta name="keywords" content="Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù†Ù…ÙŠ Ø§Ù„Ù…Ø­Ù‚Ù‚ ÙƒÙˆÙ†Ø§Ù† Detective Conan, Ø§Ù†Ù…ÙŠ Ø§Ù„Ù…Ø­Ù‚Ù‚ ÙƒÙˆÙ†Ø§Ù† Detective Conan, Ø§Ù„Ù…Ø­Ù‚Ù‚ ÙƒÙˆÙ†Ø§Ù† Detective Conan, Ø§Ù†Ù…ÙŠ Ø§Ù„Ù…Ø­Ù‚Ù‚ ÙƒÙˆÙ†Ø§Ù† Detective Conan Ø§ÙˆÙŠØ¨Ùˆ, Ø§Ù„Ù…Ø­Ù‚Ù‚ ÙƒÙˆÙ†Ø§Ù† Detective Conan ÙØ±ÙŠÙ‚ Ø§ÙˆÙŠØ¨Ùˆ Ù„Ù„ØªØ±Ø¬Ù…Ø©" />
    
    <meta name="description" content="Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø­Ù„Ù‚Ø© ${ep} Ù…Ù† Ø§Ù†Ù…ÙŠ Ø§Ù„Ù…Ø­Ù‚Ù‚ ÙƒÙˆÙ†Ø§Ù† ( ${title} ) ÙØ±ÙŠÙ‚ Ø§ÙˆÙŠØ¨Ùˆ Ù„Ù„ØªØ±Ø¬Ù…Ø© Ø§ÙˆÙ† Ù„Ø§ÙŠÙ† ÙƒØ§Ù…Ù„Ø© Ø¨Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ© HD." />
    
    <meta name="rating" content="General" />
    <meta name="distribution" content="Global" />
    <meta name="classification" content="All" />
    <meta name="revisit-after" content="1 hour" />
    <meta name="Expires" content="0" />
    <meta http-equiv="Content-Language" content="ar-eg" />
    <meta http-equiv="Cache-Control" content="no-cache" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta name="language" content="AR" />
    <meta name="creator" content="https://aoibu.github.io/Aoibu/" />
    <meta name="publisher" content="https://aoibu.github.io/Aoibu/" />
    <meta name="contact" content="" />
    <meta name="copyright" content="All Rights Reserved ÙØ±ÙŠÙ‚ Ø§ÙˆÙŠØ¨Ùˆ Ù„Ù„ØªØ±Ø¬Ù…Ø© - Aoibu" />
    <meta name="theme-color" content="#ffffff" />
    
    <meta property="og:locale" content="ar-eg" />
    <meta property="og:site_name" content="Ø§Ù†Ù…ÙŠ Ø§Ù„Ù…Ø­Ù‚Ù‚ ÙƒÙˆÙ†Ø§Ù† Detective Conan Ø§Ù„Ø­Ù„Ù‚Ø© ${ep} Ù…ØªØ±Ø¬Ù…Ø©" />
    <meta property="og:url" content="https://aoibu.github.io/Aoibu/${ep}.html" />
    <meta property="og:title" content="Ø§Ù„Ù…Ø­Ù‚Ù‚ ÙƒÙˆÙ†Ø§Ù† - Ø§Ù„Ø­Ù„Ù‚Ø© ${ep} : ${title}" />
    <meta property="og:description" content="Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø­Ù„Ù‚Ø© ${ep} Ø¨Ø¹Ù†ÙˆØ§Ù† '${title}' ØªØ±Ø¬Ù…Ø© ÙØ±ÙŠÙ‚ Ø§ÙˆÙŠØ¨Ùˆ." />
    <meta property="og:type" content="video" />
    <meta property="og:image" content="${poster}" />
    <meta property="og:image:secure_url" content="${poster}" />
    <meta property="og:video:url" content="https://aoibu.github.io/Aoibu/${ep}.html" />
    <meta property="og:video:width" content="1280" />
    <meta property="og:video:height" content="720" />
    <meta property="og:extensions" content="https://aoibu.github.io/Aoibu/" />
    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://aoibu.github.io/Aoibu/${ep}.html" />
    <meta name="twitter:title" content="Ø§Ù„Ù…Ø­Ù‚Ù‚ ÙƒÙˆÙ†Ø§Ù† Ø§Ù„Ø­Ù„Ù‚Ø© ${ep} : ${title}" />
    <meta name="twitter:description" content="Ù…Ø´Ø§Ù‡Ø¯Ø© ÙˆØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø­Ù„Ù‚Ø© ${ep} Ù…ØªØ±Ø¬Ù…Ø©." />
    <meta name="twitter:image" content="${poster}" />
    
    <link rel="alternate" type="application/rss+xml" title="Ø§Ù†Ù…ÙŠ Ø§Ù„Ù…Ø­Ù‚Ù‚ ÙƒÙˆÙ†Ø§Ù† Detective Conan Ø§Ù„Ø­Ù„Ù‚Ø© ${ep} Ù…ØªØ±Ø¬Ù…Ø©" href="https://aoibu.github.io/Aoibu/rss.xml" />
    
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "https://aoibu.github.io/Aoibu/",
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://aoibu.github.io/Aoibu/={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      }
    <\/script>

    <script>
      (function() {
        var path = window.location.pathname;
        var fileName = path.substring(path.lastIndexOf('/') + 1);
        var match = fileName.match(/(\\d+)/); 
        var epNum = match ? match[0] : "${ep}"; 

        document.title = document.title.replace(/{EP}/g, epNum);

        function updateMetaTags() {
            var metaTags = document.getElementsByTagName('meta');
            for (var i = 0; i < metaTags.length; i++) {
                if (metaTags[i].getAttribute('content')) {
                    var oldContent = metaTags[i].getAttribute('content');
                    if (oldContent.includes('{EP}')) {
                        metaTags[i].setAttribute('content', oldContent.replace(/{EP}/g, epNum));
                    }
                }
            }
        }
        updateMetaTags();
      })();
    <\/script>
  
  <style>
    :root {
      --primary-color: #00bcd4;
      --bg-dark: #0a0b10;
      --card-bg: rgba(22, 24, 31, 0.7);
      --text-main: #ffffff;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      background-color: var(--bg-dark);
      background-image: 
        radial-gradient(circle at 10% 20%, rgba(0, 188, 212, 0.15) 0%, transparent 40%),
        radial-gradient(circle at 90% 80%, rgba(255, 61, 61, 0.15) 0%, transparent 40%);
      font-family: 'El Messiri', sans-serif;
      color: var(--text-main);
      overflow-x: hidden;
      user-select: none;
    }

    #preloader {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: #000; z-index: 9999;
      display: flex; justify-content: center; align-items: center;
      transition: opacity 0.8s ease, visibility 0.8s;
    }
    .loader-content { position: relative; width: 100px; height: 100px; }
    .keyhole {
      width: 100%; height: 100%;
      border: 4px solid var(--primary-color); border-radius: 50%;
      box-shadow: 0 0 30px var(--primary-color), inset 0 0 20px var(--primary-color);
      animation: pulseGlow 2s infinite;
    }
    .keyhole::after {
        content: ''; position: absolute; bottom: -20px; left: 50%; transform: translateX(-50%);
        width: 30px; height: 50px; background: var(--primary-color);
        clip-path: polygon(20% 0%, 80% 0%, 100% 100%, 0% 100%);
        box-shadow: 0 0 30px var(--primary-color);
    }
    @keyframes pulseGlow {
        0%, 100% { box-shadow: 0 0 20px var(--primary-color); opacity: 1; }
        50% { box-shadow: 0 0 50px var(--primary-color); opacity: 0.7; }
    }
    body.loaded #preloader { opacity: 0; visibility: hidden; }

    #particles-container {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        overflow: hidden; z-index: -1; pointer-events: none;
    }
    .particle {
        position: absolute; border-radius: 50%;
        background: white; opacity: 0;
        will-change: transform, opacity;
        box-shadow: 0 0 10px rgba(255,255,255,0.8);
    }
    @keyframes floatUp {
        0% { transform: translateY(100vh) scale(0); opacity: 0; }
        20% { opacity: 0.8; }
        80% { opacity: 0.8; }
        100% { transform: translateY(-10vh) scale(1); opacity: 0; }
    }

    .fog {
        position: fixed; bottom: 0; left: 0; width: 200%; height: 40vh;
        background: linear-gradient(to top, rgba(0, 188, 212, 0.15), transparent);
        filter: blur(20px); z-index: -1;
        animation: fogMove 20s infinite alternate ease-in-out;
        will-change: transform;
    }
    @keyframes fogMove { from { transform: translateX(0); } to { transform: translateX(-50%); } }

    header {
      background: rgba(20, 20, 30, 0.6);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      padding: 15px 30px; position: sticky; top: 0; z-index: 100;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex; justify-content: space-between; align-items: center;
      box-shadow: 0 5px 30px rgba(0,0,0,0.5);
    }
    .home-link { color: #fff; text-decoration: none; font-weight: bold; transition: 0.3s; text-shadow: 0 0 10px var(--primary-color); }

    .container { max-width: 900px; margin: 40px auto; padding: 20px; position: relative; }

    .glass-card {
      background: var(--card-bg);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 20px; padding: 30px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.5);
      margin-bottom: 30px;
      opacity: 0; transform: translateY(30px);
      transition: all 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
    }
    .glass-card.visible { opacity: 1; transform: translateY(0); }

    .poster-glow {
        border-radius: 15px; width: 100%; max-width: 280px;
        box-shadow: 0 0 30px rgba(0, 188, 212, 0.3);
        transition: transform 0.4s;
    }
    .poster-glow:hover { transform: scale(1.03) rotate(1deg); }

    h1 { 
        background: linear-gradient(90deg, #fff, var(--primary-color));
        -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        margin: 15px 0; font-size: 26px; 
    }

    .video-wrap {
      position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;
      border-radius: 15px; border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 0 0 40px rgba(0, 188, 212, 0.15);
      margin-bottom: 25px; background: #000;
    }
    .video-wrap iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }

    .neon-btn {
      padding: 10px 30px; border-radius: 50px; border: 1px solid var(--primary-color);
      background: rgba(0, 188, 212, 0.1); color: var(--primary-color);
      font-family: 'El Messiri'; font-weight: bold; cursor: pointer;
      transition: 0.3s; position: relative; overflow: hidden;
      text-decoration: none; display: inline-flex; align-items: center; gap: 8px;
    }
    .neon-btn:hover, .neon-btn.active {
      background: var(--primary-color); color: #000;
      box-shadow: 0 0 20px var(--primary-color);
    }

    .dl-table { width: 100%; border-collapse: collapse; margin-top: 15px; background: rgba(0,0,0,0.3); border-radius: 10px; overflow: hidden; }
    .dl-table th { padding: 15px; color: var(--primary-color); background: rgba(0, 188, 212, 0.05); }
    .dl-table td { padding: 15px; border-bottom: 1px solid rgba(255,255,255,0.05); text-align: center; color: #ddd; }
    .dl-link { 
        color: #fff; text-decoration: none; background: linear-gradient(45deg, var(--primary-color), #008ba3);
        padding: 5px 20px; border-radius: 20px; font-size: 14px; box-shadow: 0 5px 15px rgba(0,188,212,0.3);
        transition: 0.3s;
    }
    .dl-link:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,188,212,0.5); }

    .stars span { font-size: 40px; cursor: pointer; color: #333; transition: 0.3s; display: inline-block; }
    .stars span:hover { transform: scale(1.3); color: #ffd700 !important; text-shadow: 0 0 20px #ffd700; }

    footer {
        margin-top: 60px; padding: 40px; text-align: center; color: #888;
        border-top: 1px solid rgba(255,255,255,0.05);
        background: linear-gradient(to top, #000, transparent);
    }

    .credits-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: 15px;
        margin-top: 20px;
    }
    .credit-item {
        background: rgba(255,255,255,0.03);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 12px;
        padding: 15px 10px;
        text-align: center;
        transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
    }
    .credit-item:hover {
        transform: translateY(-5px);
        background: rgba(255,255,255,0.08);
        box-shadow: 0 5px 20px rgba(0, 188, 212, 0.15);
    }
    .credit-role { display: block; font-size: 0.9rem; color: #888; margin-bottom: 5px; }
    .credit-name {
        display: block; font-size: 1.1rem; font-weight: bold; color: #fff;
        text-shadow: 0 0 5px rgba(255,255,255,0.3);
        text-decoration: none; transition: 0.3s;
    }
    .credit-name:hover {
        color: var(--primary-color);
        text-shadow: 0 0 15px var(--primary-color);
    }
    .cinema-btn {
      background: transparent; border: 1px solid rgba(255,255,255,0.2);
      color: #fff; padding: 8px 15px; border-radius: 20px;
      cursor: pointer; margin-bottom: 10px; font-size: 0.9rem;
      display: inline-flex; align-items: center; gap: 5px;
      transition: 0.3s;
    }
    .cinema-btn:hover { background: var(--primary-color); color: #000; }
  </style>
</head>

<body>

<div id="preloader">
  <div class="loader-content">
    <div class="keyhole"></div>
  </div>
</div>

<div id="particles-container"></div>
<div class="fog"></div>

<header>
  <a href="#" class="home-link">Aoibu Team</a>
  <span style="color:var(--primary-color); font-size: 1.2rem;">â˜…</span>
  <button class="cinema-btn" onclick="shareEpisode()">
  <span>ğŸ”—</span> Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø­Ù„Ù‚Ø©
</button>

</header>

<div class="container">

  <div class="glass-card visible">
    <img class="poster-glow" src="${poster}" alt="poster" />
    <h1>Ø§Ù„Ù…Ø­Ù‚Ù‚ ÙƒÙˆÙ†Ø§Ù† - Ø§Ù„Ø­Ù„Ù‚Ø© ${ep}</h1>
    <p style="color: #aaa;"> ${title} </p>

    <div class="episode-nav" style="display:flex; justify-content:center; gap:20px; margin:30px 0;">
      <a id="prevEpisode" class="neon-btn">â¬…ï¸ Ø§Ù„Ø­Ù„Ù‚Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</a>
      <a id="nextEpisode" class="neon-btn">Ø§Ù„Ø­Ù„Ù‚Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© â¡ï¸</a>
    </div>
    
    <div class="video-wrap">
      <iframe id="videoFrame" src="${driveEmbed}" allowfullscreen></iframe>
    </div>

    <div style="display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; margin-bottom: 30px;">
      <button class="neon-btn active" onclick="changeServer('${driveEmbed}', this)">
        Google Drive
      </button>
      <button class="neon-btn" onclick="changeServer('${megaEmbed}', this)">
        Mega 1080p
      </button>
    </div>

    <div style="overflow-x: auto;">
        <table class="dl-table">
            <tr><th>Ø§Ù„Ø³ÙŠØ±ÙØ±</th><th>Ø§Ù„Ø¬ÙˆØ¯Ø©</th><th>Ø§Ù„ØªØ­Ù…ÙŠÙ„</th></tr>
            <tr><td>Mega</td><td>1080p FHD</td><td><a href="${megaDL}" class="dl-link">ØªØ­Ù…ÙŠÙ„</a></td></tr>
            <tr><td>Drive</td><td>1080p FHD</td><td><a href="${driveDL}" class="dl-link">ØªØ­Ù…ÙŠÙ„</a></td></tr>
        </table>
    </div>
  </div>

  <div class="glass-card">
    <h3 style="color: var(--primary-color); margin-top: 0; display: flex; align-items: center; gap: 10px;">
      <span>ğŸ“</span> Ù…Ù„ÙØ§Øª Ø§Ù„Ø³ÙˆÙØª Ø³Ø¨ (Soft-sub)
    </h3>
    <p style="font-size: 14px; color: #bbb; margin-bottom: 15px;">
        ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø®Ø§Ù… ÙˆÙ…Ù„Ù Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„Ù…Ù†ÙØµÙ„ Ù„Ù„Ù…Ø´Ø§Ù‡Ø¯Ø© Ø¨Ø£Ø¹Ù„Ù‰ Ø¬ÙˆØ¯Ø©:
    </p>
    <div style="display: flex; gap: 12px; flex-wrap: wrap;">
        <a href="${rawLink}" target="_blank" class="neon-btn">
          <span>ğŸ¬</span> Ø§Ù„Ø®Ø§Ù… (MP4)
        </a>
        <a href="${subLink}" target="_blank" class="neon-btn">
          <span>ğŸ“</span> Ù…Ù„Ù Ø§Ù„ØªØ±Ø¬Ù…Ø© (ASS)
        </a>
    </div>
  </div>

  <div class="glass-card">
    <h3 style="color: var(--primary-color); margin-top: 0;">âš¡ Ù‚ØµØ© Ø§Ù„Ø­Ù„Ù‚Ø©</h3>
    <p style="line-height: 1.8; color: #ddd;">
      ${title}
    </p>
  </div>

    <div class="glass-card">
    <h3 style="color: var(--primary-color); margin-top: 0; display: flex; align-items: center; gap: 10px;">
        <span>âœ’ï¸</span> Ø·Ø§Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„
    </h3>
    <p style="font-size: 14px; color: #bbb;">ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ù‡Ø°Ù‡ Ø§Ù„Ø­Ù„Ù‚Ø© Ø¨ÙˆØ§Ø³Ø·Ø© ( ÙØ±ÙŠÙ‚ Ø§ÙˆÙŠØ¨Ùˆ Ù„Ù„ØªØ±Ø¬Ù…Ø© ):</p>
    
    <div class="credits-grid">
        <div class="credit-item">
            <span class="credit-role">Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø© ÙˆØ±ÙØ¹ ÙˆØ§Ù„Ø¨Ø±Ù…Ø¬Ø© ÙˆØ§Ù„ØªØµÙ…ÙŠÙ…</span>
            <a href="https://x.com/TheConanSign" target="_blank" class="credit-name">TheConanSign</a> 
        </div>
        <div class="credit-item">
            <span class="credit-role">Ø§Ù„ØªØ±Ø¬Ù…Ø© ÙˆØ§Ù„Ø¥Ù†ØªØ§Ø¬ ÙˆØ§Ù„Ø´Ø§Ø±Ø§Øª</span>
            <a href="https://x.com/ABOODY_SUBS" target="_blank" class="credit-name">ABOODYSUBS</a> 
        </div>
    </div>
  </div>


  <div class="glass-card" style="text-align: center;">
    <h3 style="color: var(--primary-color);">â­ Ù‚ÙŠÙ‘Ù… Ø§Ù„Ø­Ù„Ù‚Ø©</h3>
    <div class="stars" id="rating-stars">
      <span onclick="rate(1)">â˜…</span><span onclick="rate(2)">â˜…</span><span onclick="rate(3)">â˜…</span><span onclick="rate(4)">â˜…</span><span onclick="rate(5)">â˜…</span>
    </div>
    <p id="rating-msg" style="color: var(--primary-color); height: 20px; margin-top: 10px;"></p>
  </div>

</div>

<footer>
  &copy; 2025 Aoibu Team | Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©
</footer>

<script>
  window.onload = () => { setTimeout(() => { document.body.classList.add('loaded'); }, 1000); };

  const particleContainer = document.getElementById('particles-container');
  const particleCount = 35; 
  for (let i = 0; i < particleCount; i++) {
      let p = document.createElement('div');
      p.classList.add('particle');
      let size = Math.random() * 3 + 1;
      let left = Math.random() * 100;
      let duration = Math.random() * 10 + 10;
      let delay = Math.random() * 10;
      p.style.width = \`\${size}px\`;
      p.style.height = \`\${size}px\`;
      p.style.left = \`\${left}%\`;
      p.style.animation = \`floatUp \${duration}s linear \${delay}s infinite\`;
      particleContainer.appendChild(p);
  }

  const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
          if(entry.isIntersecting) { entry.target.classList.add('visible'); }
      });
  }, { threshold: 0.1 });
  document.querySelectorAll('.glass-card').forEach(el => observer.observe(el));

  function changeServer(url, btn) {
      document.getElementById('videoFrame').src = url;
      document.querySelectorAll('.neon-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
  }

  const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwzK1u56o3Vz2qiNIEio_NMZKThCkckFCUOG2fi0HZCXn2pDGjxmcy6mxXP3hsZ7HkjWA/exec"; 
  const fileName = window.location.pathname.split("/").pop();
  let currentEpisode = fileName.replace(".html", "") || "${ep}"; 

  function rate(n) {
      let stars = document.querySelectorAll('.stars span');
      stars.forEach((s, index) => {
          s.style.color = index < n ? '#ffd700' : '#333';
          s.style.textShadow = index < n ? '0 0 15px #ffd700' : 'none';
      });
      const msgElement = document.getElementById('rating-msg');
      msgElement.innerText = \`Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ ØªÙ‚ÙŠÙŠÙ…Ùƒ (\${n}/5)...\`;
      fetch(\`\${GOOGLE_SCRIPT_URL}?episode=\${currentEpisode}&rating=\${n}\`, {
          method: "POST", mode: "no-cors"
      }).then(() => {
          msgElement.innerText = \`ØªÙ… ØªØ³Ø¬ÙŠÙ„ ØªÙ‚ÙŠÙŠÙ…Ùƒ Ø¨Ù†Ø¬Ø§Ø­! (\${n}/5)\`;
          msgElement.style.color = "#00bcd4";
          document.getElementById('rating-stars').style.pointerEvents = 'none';
      }).catch(error => {
          msgElement.innerText = \`Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„.\`;
          msgElement.style.color = "red";
      });
  }

  document.addEventListener('contextmenu', e => e.preventDefault());
  document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey && ['c','a','x','u','s'].includes(e.key.toLowerCase())) || e.key === 'F12') {
      e.preventDefault();
    }
  });

  function shareEpisode() {
    const url = window.location.href;
    navigator.clipboard.writeText(url).then(() => { alert("ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ø­Ù„Ù‚Ø©!"); }).catch(() => {});
  }

  const navPath = window.location.pathname;
  const navFileName = navPath.substring(navPath.lastIndexOf('/') + 1);
  const cleanName = navFileName.split('?')[0].split('#')[0];
  const navCurrentEp = parseInt(cleanName.replace(/\\D/g, '')); 
  const minEpisode = 1; 
  const prevBtn = document.getElementById("prevEpisode");
  const nextBtn = document.getElementById("nextEpisode");

  if (!isNaN(navCurrentEp)) {
    if (navCurrentEp > minEpisode) {
      prevBtn.setAttribute("href", \`\${navCurrentEp - 1}.html\`);
    } else {
      prevBtn.style.opacity = "0.4";
      prevBtn.style.pointerEvents = "none";
      prevBtn.removeAttribute("href");
    }
    nextBtn.setAttribute("href", \`\${navCurrentEp + 1}.html\`);
  } else {
      // Fallback if filename is index.html
      prevBtn.setAttribute("href", "${ep - 1}.html");
      nextBtn.setAttribute("href", "${+ep + 1}.html");
  }

  document.addEventListener("DOMContentLoaded", function() {
    var todayDate = new Date().toISOString(); 
    var schemaData = {
      "@context": "https://schema.org",
      "@type": "VideoObject",
      "name": "Ø§Ù†Ù…ÙŠ Ø§Ù„Ù…Ø­Ù‚Ù‚ ÙƒÙˆÙ†Ø§Ù† Ø§Ù„Ø­Ù„Ù‚Ø© ${ep} Ù…ØªØ±Ø¬Ù…Ø©",
      "description": "Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø­Ù„Ù‚Ø© ${ep} Ù…Ù† Ø§Ù†Ù…ÙŠ Ø§Ù„Ù…Ø­Ù‚Ù‚ ÙƒÙˆÙ†Ø§Ù†...",
      "thumbnailUrl": "${poster}", 
      "uploadDate": todayDate,
      "contentUrl": window.location.href, 
      "embedUrl": "${driveEmbed}" 
    };
    var script = document.createElement('script');
    script.type = 'application/ld+json';
    script.text = JSON.stringify(schemaData);
    document.getElementsByTagName('head')[0].appendChild(script);
  });
<\/script>
</body>
</html>`;

        document.getElementById('outputCode').value = template;
    }

    function copyCode() {
        var copyText = document.getElementById("outputCode");
        copyText.select();
        copyText.setSelectionRange(0, 99999); 
        navigator.clipboard.writeText(copyText.value);
        alert("ØªÙ… Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­!");
    }
</script>

</body>
</html>
